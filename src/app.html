<template>
  <require from="./style.css"></require>
  <require from="./movie"></require>
  <require from="./pageControl"></require>
  <div class="background" css.bind="getBackground"></div>
  <div class="searchboxContainer">
    <input class="searchbox" placeholder="search for movies..." value.bind="query & debounce : 250">
  </div>
  <div class="queryStats">
      <span if.bind="totalResults > 0">${totalResults} results</span>
      <span if.bind="numPages > 1"> in ${numPages} pages</span>
  </div>
  <div class="movieList">
    <movie class.bind="(selectedMovie==$index)? 'selectedMovie' : ''" 
          selected.bind="selectedMovie==$index" 
          movie-data.bind="movie" 
          click.trigger="selectMovie($index)" 
          repeat.for="movie of movies">
    </movie>
  </div>
  <div if.bind="!requestPending && totalResults == 0 && query != ''">No results found</div>
  <div class="pageControlContainer">
    <page-control
      current-page.two-way="currentPage" 
      num-pages.bind="numPages"
      total-results.bind="totalResults"
      disabled.bind="requestPending">
    </page-control>
    <div class="queryStats">
        <span if.bind="totalResults > 0">${totalResults} results</span>
        <span if.bind="numPages > 1"> in ${numPages} pages</span>
    </div>
  </div>
</template>
